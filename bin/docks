#!/bin/sh
CURR_PATH=$(pwd)
DOCKERFILE_PATH="/home/aorith/githome/odroid/docker/"
cd $DOCKERFILE_PATH

f_stop() {
    echo "Stopping docker appliances..."
    #docker stop cardigann
    #docker stop lidarr
    docker stop jackett
    docker stop sonarr
    docker stop radarr
    docker stop torproxy
    sudo systemctl stop docker
    sudo systemctl stop containerd
}

f_start() {
    echo "Starting docker appliances..."
    sudo systemctl start docker
    sudo systemctl start containerd
    docker-compose up -d torproxy
    docker-compose up -d jackett
    docker-compose up -d sonarr
    docker-compose up -d radarr
    #docker-compose up -d cardigann
    #docker-compose up -d lidarr
}

f_prune() {
    echo "Pruning all..."
    f_stop
    sudo systemctl start docker
    sudo docker system prune --all -f
    sudo systemctl stop docker
    sudo systemctl stop containerd
}

case "$1" in
    stop)
        f_stop
        ;;
    start)
        f_start
        ;;
    prune)
        f_prune
        ;;
    *)
        echo "Usage: $(basename $0) stop|start|prune"
        exit 1
        ;;
esac

cd $CURR_PATH
exit 0
